<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<style>
.header img {
  float: left;
  width: 75px;
  height: 75px;
  background: #FFF;
}
.header h1 {
  position: relative;
  top: 18px;
  left: 0px;
}
</style>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="shortcut icon" type="image/jpg" href="marionette.jpg" />
  <title>"See the Strings"</title>
</head>
<body background="">
  <div class="header">
    <img src="marionette.jpg" alt="logo" />
    <h1>"See the Strings"</h1>
  </div>
  <br>
  <p>
  This tool makes it possible to generate <a href="http://en.wikipedia.org/wiki/Graph_drawing">
  graph drawings</a> to visualize the contributions and expenditures made by Political Action
  Committees (PACs) during past U.S. Congressional campaign cycles. (Currently, only the 2014
  campaign cycle is supported.) These drawings represent PACs and candidates as "nodes", and the
  cash flows between them as "links" (or "strings", if you prefer the marionette analogy).
  </p>
  <p>
  A political action committee exists to raise and spend money for and against political candidates,
  in order to advance the political interests of its backers. It may represent a corporation (e.g.,
  AT&T), a trade association ("National Association of Realtors"), or an ideological point of
  view ("Citizens for Lower Taxes").
  </p>
  <p>
  Direct contributions from PACs to candidate committees (e.g., "Nancy Pelosi for Congress") are
  subject to <a href="http://www.fec.gov/pages/brochures/contriblimits.shtml">strict limits</a>.
  However, a new kind of political action committee known as "Super PACs" came into existence in
  2010. Super PACs are allowed to raise and spend <i>unlimited</i> amounts of money to advocate for
  or against political candidates, but they are prohibited from contributing money directly to
  candidate committees. The expenditures made by Super PACs are sometimes referred to as "indirect
  contributions".
  </p>
  <p>
  The drawings generated by this tool represent both direct and indirect contributions as links
  between the nodes representing PACs and candidates.
  </p>
  <p>
  This tool is powered by campaign data provided by the <a href="http://www.opensecrets.org">Center for
  responsive Politics</a>.
  </p>
  <hr>
  <h2>Ready to build your visualization?</h2>
  Let's get started then.
  <br><br>
  <form id="graphForm" action="graph.html" method="GET">
    Which candidates' 2014 campaign contributions would you like to see? (Select one or more.)
    <br><br>
    <select id="candidatesList" name="candidates" multiple="multiple" size=20>
    </select>
    <br><br>
    Would you like to see the contributions for each candidate <i>separately</i>, or for
    for all selected candidates <i>combined</i>?
    <br>
    <input type="radio" name="groupCandidatesBy" value="Candidate" checked="true">
      Separate
    <br>
    <input type="radio" name="groupCandidatesBy" value="Selection">
      Combined
    <br><br>
    How would you like their contributions to be aggregated?
    <br>
    <input type="radio" name="groupContributionsBy" value="PAC" checked="true">
      By individual Political Action Committee
    <br>
    <input type="radio" name="groupContributionsBy" value="Industry">
      By industry (aggregated)
    <br>
    <input type="radio" name="groupContributionsBy" value="Sector">
      By sector (more aggregated)
    <br><br>
    Which contribution types would you like to see?
    <br>
    <input type="checkbox" name="contributionTypes" value="'D'" checked="true">
      Direct contributions to candidate committees
    <br>
    <input type="checkbox" name="contributionTypes" value="'I'" checked="true">
      Indirect expenditures to influence candidates' election prospects
    <br><br>
    What's the max number of "connections" you'd like to see per contribution type, per candidate?
    <input name="maxContributionLinks" type="text" value=5>
    <br><br><br><br>
    <input type="button" style="width:400px;font-size:16pt" onclick="document.getElementById('graphForm').submit()" value="See the contributions!">
    <br><br><br><br>
  </form>
</body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

function addOptionToSelectBox(selectbox, text, value) {
  var option = document.createElement("OPTION");
  option.text = text;
  option.value = value;
  selectbox.options.add(option);
}

d3.json("/candidates", doStuff);

function doStuff(err, candidates) {
  // TODO: Check for errors.

  var selectBox = document.getElementById("candidatesList");
  candidates.forEach(
      function(row) {
        addOptionToSelectBox(selectBox, row.FirstLastP, "'" + row.CID + "'");
      });
}

</script>
</html>
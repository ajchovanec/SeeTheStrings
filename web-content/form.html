<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<style>
.header img {
  float: left;
  width: 75px;
  height: 75px;
  background: #FFF;
}
.header h1 {
  position: relative;
  top: 18px;
  left: 0px;
}
</style>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="shortcut icon" type="image/jpg" href="marionette.jpg" />
  <title>"See the Strings"</title>
</head>
<body background="">
  <div class="header">
    <img src="marionette.jpg" alt="logo" />
    <h1>"See the Strings"</h1>
  </div>
  <br><br>
  <form id="graphForm" action="graph.html" method="GET">
    Which candidates' 2014 campaign contributions would you like to see? (Select one or more.)
    <br><br>
    <select id="candidatesList" name="candidates" multiple="multiple" size=20>
    </select>
    <br><br>
    Would you like to see the contributions for each candidate <i>separately</i>, or for
    for all selected candidates <i>combined</i>?
    <br>
    <input type="radio" name="groupCandidatesBy" value="Candidate" checked="true">
      Separate
    <br>
    <input type="radio" name="groupCandidatesBy" value="Selection">
      Combined
    <br><br>
    How would you like their contributions to be aggregated?
    <br>
    <input type="radio" name="groupContributionsBy" value="PAC" checked="true">
      By individual Political Action Committee (not aggregated)
    <br>
    <input type="radio" name="groupContributionsBy" value="Industry">
      By industry (<i>more</i> aggregated)
    <br>
    <input type="radio" name="groupContributionsBy" value="Sector">
      By sector (<b>most</b> aggregated)
    <br><br>
    Which contribution types would you like to see?
    <br>
    <input type="checkbox" name="contributionTypes" value="'D'" checked="true">
      Direct contributions to candidate committees
    <br>
    <input type="checkbox" name="contributionTypes" value="'I'" checked="true">
      Indirect expenditures to influence candidates' election prospects
    <br><br>
    What's the max number of "connections" you'd like to see per contribution type, per candidate?
    <br>
    <input name="maxContributionLinks" type="text" value=5>
    <br><br>
    <input type="button" onclick="document.getElementById('graphForm').submit()" value="Submit">
  </form>
</body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

function addOptionToSelectBox(selectbox, text, value) {
  var option = document.createElement("OPTION");
  option.text = text;
  option.value = value;
  selectbox.options.add(option);
}

d3.json("/candidates", doStuff);

function doStuff(err, candidates) {
  // TODO: Check for errors.

  var selectBox = document.getElementById("candidatesList");
  candidates.forEach(
      function(row) {
        addOptionToSelectBox(selectBox, row.FirstLastP, "'" + row.CID + "'");
      });
}

</script>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<style>
.header img {
  float: left;
  width: 75px;
  height: 75px;
  background: #FFF;
}
.header h1 {
  position: relative;
  top: 18px;
  left: 0px;
}
</style>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="shortcut icon" type="image/jpg" href="marionette.jpg" />
  <title>"See the Strings"</title>
</head>
<body background="">
  <div class="header">
    <img src="marionette.jpg" alt="logo" />
    <h1>"See the Strings"</h1>
  </div>
  <br><br>
  <form id="graphForm" action="graph.html" method="GET">
    Select one or more candidates from the 2014 campaign cycle for whom to visualize contributions:
    <br><br>
    <select id="candidatesList" name="candidates" multiple="multiple" size=20>
    </select>
    <br><br>
    Group contributions by:
    <input type="radio" name="groupContributionsBy" value="PAC" checked="true">
      Political Action Committee
    <input type="radio" name="groupContributionsBy" value="Industry">
      Industry
    <input type="radio" name="groupContributionsBy" value="Sector">
      Sector
    <br><br>
    Contribution types to show:
    <input type="checkbox" name="contributionTypes" value="'D'" checked="true">
      Direct
    <input type="checkbox" name="contributionTypes" value="'I'" checked="true">
      Indirect
    <br><br>
    Max contribution links to display per type, per candidate:<input name="maxContributionLinks" type="text" value=5>
    <br><br>
    <input type="button" onclick="document.getElementById('graphForm').submit()" value="Submit">
  </form>
</body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

function addOptionToSelectBox(selectbox, text, value) {
  var option = document.createElement("OPTION");
  option.text = text;
  option.value = value;
  selectbox.options.add(option);
}

d3.json("/candidates", doStuff);

function doStuff(err, candidates) {
  // TODO: Check for errors.

  var selectBox = document.getElementById("candidatesList");
  candidates.forEach(
      function(row) {
        addOptionToSelectBox(selectBox, row.FirstLastP, "'" + row.CID + "'");
      });
}

</script>
</html>